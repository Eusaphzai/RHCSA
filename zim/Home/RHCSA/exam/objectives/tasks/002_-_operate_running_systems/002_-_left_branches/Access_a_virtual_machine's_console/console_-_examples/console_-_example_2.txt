Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-08-04T22:20:04-04:00

====== console - example 2 ======
Created Saturday 04 August 2018

examples template version: Friday 31 2018 10:09:02 PM
(command to get timestamp: date '+%A %W %Y %X' )

[[Home]]
[[Home:all templates]]
[[Home:TODO LIST]]
[[console - examples]]

**KYWRD:** console

**Summary**
In [[console - example 1]], we unsuccessfully tried to get networking working on a [[alphabetical list of essential tools and terms:C:CentOS]] virtual machine inside KVM.  Then I read this article: http://www.linux-kvm.org/page/Networking It gave me a different approach to getting networking working: simply starting the virtual machine (VM) from the command line without any networking options (e.g. qemu-system-x86_64 -hda [[/path/to/hda.img]]), In this example, I will use this technique to try to get networking working on my [[alphabetical list of essential tools and terms:C:CentOS]] VM.

The first thing that I needed to find out isd where the virtual machine image file actually exists in my filesystem. It turns out that KVM VM images reside in this directory (navigating to this directory requires root privileges): admin:///var/lib/libvirt/images/  So on your system, your KVM VM files have a .qcow2 extension. Mine was called centos7.0.qcow2 (See Figure 1 in the Screenshots section). So the path to my VM image is [[/var/lib/libvirt/images/centos7.0.qcow2]] . We will need this a little bit later.

So again, taking direction from [[http://www.linux-kvm.org/page/Networking|here,]] we will build our command to start up our VM:
* generic command format: qemu-system-x86_64 -hda [[/path/to/hda.img]]
* our actual command: qemu-system-x86_64 -hda [[/var/lib/libvirt/images/centos7.0.qcow2]] (keep in mind that we have to run this with root privileges).
**console - tasks **(command line commands are __highlighted__)**:**
* Step 1: attempt to start the VM using our constructed command.  On the computer system that I am using for today's example, I am part of the wheel group. This means that I can run commands requiring root privileges using sudo.  So my command will be __sudo qemu-system-x86_64 -hda /var/lib/libvirt/images/centos7.0.qcow2__ If you do not have sudo setup, your command will be __su -c "qemu-system-x86_64 -hda /var/lib/libvirt/images/centos7.0.qcow2"__
* Step 2: the result of Step 1 was a failure (see Figure 2).  This is the error message that I received: Unable to init server: Could not connect: Connection refused gtk initialization failed
* Step 3: **SUCCESS** starting up the VM from the command line. **FAILURE** connecting to the Internet on the VM.
	* Solution 1: xhost +
		* running the xhost + disables access control disabled, allow any client (including root)  to connect to the graphical server.
		* I ran __xhost +__
		* then I ran __sudo qemu-system-x86_64 -hda /var/lib/libvirt/images/centos7.0.qcow2__ 
		* my VM started right up (see Figures 3 and 4)
		* I tested networking by pinging one of the Google-controlled ip addresses: 8.8.8.8 (ping 8.8.8.8) Result: failure. Not of the sent packets of data were returned. So though I sucessfully started the VM, it still cannot connect to the Internet..

In console - example 3, I will continue trying to get a working Internet connection on the [[alphabetical list of essential tools and terms:C:CentOS]] VM.

**Relevant console Screenshots**
Figure 1 - The VM image file for my Centos virtual machine
{{./pasted_image.png}}
Figure 2 - starting VM fails - connection refused
{{./pasted_image001.png}}
Figure 3 - success starting up the VM
{{./pasted_image002.png}}
Figure 4 - [[alphabetical list of essential tools and terms:C:CentOS]] sucessfully starting up after issuing command line commands.
{{./pasted_image003.png}}
